<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seleknyyy Store - ØªØ³ÙˆÙ‚ Ø¨Ø£Ù…Ø§Ù† ÙˆØ«Ù‚Ø©</title>
    <!-- Bootstrap RTL -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #f59e0b;
            --success: #10b981;
        }
        body {
            background: #f1f5f9;
            font-family: 'Tajawal', sans-serif;
        }
        .navbar {
            background: white;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            padding: 1rem 0;
        }
        .logo {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5rem 0;
            border-radius: 0 0 3rem 3rem;
            margin-bottom: 3rem;
        }
        .stat-card {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
        }
        .category-card {
            background: white;
            border-radius: 1.5rem;
            padding: 2rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 2px solid transparent;
        }
        .category-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(37,99,235,0.15);
        }
        .category-card.active {
            border-color: var(--primary);
            background: #eff6ff;
        }
        .category-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        .product-card {
            background: white;
            border-radius: 1.5rem;
            overflow: hidden;
            transition: all 0.3s;
            height: 100%;
            border: 1px solid #e2e8f0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer;
        }
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 50px rgba(0,0,0,0.15);
        }
        .product-image {
            height: 220px;
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: #94a3b8;
        }
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .product-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
        }
        .btn-order {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            border: none;
            border-radius: 2rem;
            padding: 0.6rem 1.5rem;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        .btn-order:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(16,185,129,0.3);
            color: white;
        }
        .btn-outline-primary {
            border-radius: 2rem;
            padding: 0.6rem 1.5rem;
        }
        .search-box {
            background: white;
            border-radius: 2rem;
            padding: 0.5rem 1rem;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            width: 300px;
        }
        .search-box input {
            border: none;
            outline: none;
            width: 100%;
            padding: 0.3rem 0.5rem;
        }
        .search-box button {
            background: none;
            border: none;
            color: var(--primary);
        }
        .footer {
            background: white;
            padding: 2rem 0;
            margin-top: 4rem;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }

        /* ===== ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬ ===== */
        .product-page {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .product-details {
            background: white;
            border-radius: 2rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        .main-image {
            width: 100%;
            height: 400px;
            border-radius: 1.5rem;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-list {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 1rem;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .thumbnail:hover {
            border-color: var(--primary);
        }

        .thumbnail.active {
            border-color: var(--primary);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .product-price-large {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .product-price-large::after {
            content: ' Ø¯.Ø¬';
            font-size: 1.5rem;
        }

        .product-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #475569;
            margin-bottom: 2rem;
        }

        .btn-order-large {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            border: none;
            border-radius: 3rem;
            padding: 1.2rem 3rem;
            font-size: 1.3rem;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-order-large:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(16,185,129,0.3);
        }

        .btn-wishlist {
            background: white;
            color: #ef4444;
            border: 2px solid #ef4444;
            border-radius: 3rem;
            padding: 1.2rem 2rem;
            font-size: 1.3rem;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 1rem;
        }

        .btn-wishlist:hover {
            background: #ef4444;
            color: white;
        }

        .btn-wishlist.active {
            background: #ef4444;
            color: white;
        }

        /* ===== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨ ===== */
        .order-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            padding: 1rem;
            overflow-y: auto;
        }

        .order-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-content {
            background: white;
            border-radius: 2rem;
            padding: 2rem;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-close {
            width: 40px;
            height: 40px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .product-preview {
            display: flex;
            gap: 1rem;
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
        }

        .preview-img {
            width: 80px;
            height: 80px;
            border-radius: 1rem;
            overflow: hidden;
        }

        .preview-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .form-control, .form-select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            margin-bottom: 1rem;
            font-family: 'Tajawal', sans-serif;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* ===== Ø´ÙˆÙ‡Ø¯ Ù…Ø¤Ø®Ø±Ø§Ù‹ ===== */
        .recent-sidebar {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            background: white;
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 999;
            transform: translateX(350px);
            transition: transform 0.3s;
        }

        .recent-sidebar.show {
            transform: translateX(0);
        }

        .recent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .recent-item {
            display: flex;
            gap: 0.8rem;
            padding: 0.5rem;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .recent-item:hover {
            background: #f1f5f9;
            border-radius: 0.5rem;
        }

        .recent-item img {
            width: 50px;
            height: 50px;
            border-radius: 0.5rem;
            object-fit: cover;
        }

        /* ===== Ø£Ø²Ø±Ø§Ø± Ø«Ø§Ø¨ØªØ© ===== */
        .fixed-buttons {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            z-index: 998;
        }

        .action-btn {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--primary), #7c3aed);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 5px 20px rgba(37,99,235,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn:hover {
            transform: scale(1.1);
        }

        /* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ===== */
        [data-theme="dark"] {
            background: #0f172a;
            color: white;
        }

        [data-theme="dark"] .navbar,
        [data-theme="dark"] .product-card,
        [data-theme="dark"] .category-card,
        [data-theme="dark"] .product-details,
        [data-theme="dark"] .order-content,
        [data-theme="dark"] .recent-sidebar,
        [data-theme="dark"] .footer {
            background: #1e293b;
            color: white;
            border-color: #334155;
        }

        [data-theme="dark"] .nav-link {
            color: white;
        }

        [data-theme="dark"] .form-control,
        [data-theme="dark"] .form-select {
            background: #334155;
            border-color: #475569;
            color: white;
        }

        [data-theme="dark"] .search-box {
            background: #334155;
        }

        [data-theme="dark"] .search-box input {
            background: #334155;
            color: white;
        }

        /* ===== ØªØ­Ù…ÙŠÙ„ ===== */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <nav class="navbar">
        <div class="container">
            <a class="logo" href="index.html">Seleknyyy Store</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showAllProducts()">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="scrollToCategories()">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="contactUs()">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center gap-2">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." onkeyup="searchProducts()">
                        <button onclick="searchProducts()"><i class="fas fa-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø«Ø§Ø¨ØªØ© -->
    <div class="fixed-buttons">
        <button class="action-btn" onclick="toggleTheme()">
            <i class="fas fa-moon" id="themeIcon"></i>
        </button>
        <button class="action-btn" onclick="toggleRecent()">
            <i class="fas fa-history"></i>
        </button>
        <button class="action-btn" onclick="showWishlist()">
            <i class="fas fa-heart"></i>
        </button>
    </div>

    <!-- Ø´ÙˆÙ‡Ø¯ Ù…Ø¤Ø®Ø±Ø§Ù‹ -->
    <div class="recent-sidebar" id="recentSidebar">
        <div class="recent-header">
            <h6><i class="fas fa-history"></i> Ø´ÙˆÙ‡Ø¯ Ù…Ø¤Ø®Ø±Ø§Ù‹</h6>
            <i class="fas fa-times" onclick="toggleRecent()" style="cursor: pointer;"></i>
        </div>
        <div id="recentList"></div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨ -->
    <div class="order-modal" id="orderModal">
        <div class="order-content">
            <div class="modal-header">
                <h5>ğŸ“ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h5>
                <button class="modal-close" onclick="closeOrderModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="product-preview" id="orderPreview"></div>

            <form id="orderForm" onsubmit="event.preventDefault(); submitOrder();">
                <input type="hidden" id="orderProductId">
                <input type="hidden" id="orderProductName">
                <input type="hidden" id="orderProductPrice">
                <input type="hidden" id="orderProductImage">
                
                <input type="text" class="form-control" id="orderName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
                <input type="tel" class="form-control" id="orderPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
                
                <select class="form-select" id="orderWilaya" required>
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
                </select>
                
                <textarea class="form-control" id="orderAddress" rows="2" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„" required></textarea>
                <textarea class="form-control" id="orderNotes" rows="2" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
                
                <button type="submit" class="btn btn-primary w-100" style="background: #10b981; border: none; padding: 0.8rem; border-radius: 30px;">
                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
                </button>
            </form>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main id="mainContent"></main>

    <!-- ØªØ°ÙŠÙŠÙ„ -->
    <footer class="footer">
        <div class="container text-center">
            <p class="mb-0">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025 Seleknyyy Store</p>
        </div>
    </footer>

    <script>
        // âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCjOIN_PDKqTqyd5KLIHtOt9Mofjtu-zas",
            authDomain: "seleknyyy-store.firebaseapp.com",
            projectId: "seleknyyy-store",
            storageBucket: "seleknyyy-store.firebasestorage.app",
            messagingSenderId: "532685887859",
            appId: "1:532685887859:web:8b4fd6141504c91f808d06"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let allProducts = [];
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let recentProducts = JSON.parse(localStorage.getItem('recentProducts')) || [];

        // Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©
        const wilayas = [
            "Ø£Ø¯Ø±Ø§Ø±", "Ø§Ù„Ø´Ù„Ù", "Ø§Ù„Ø£ØºÙˆØ§Ø·", "Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ", "Ø¨Ø§ØªÙ†Ø©", "Ø¨Ø¬Ø§ÙŠØ©", "Ø¨Ø³ÙƒØ±Ø©", 
            "Ø¨Ø´Ø§Ø±", "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", "Ø§Ù„Ø¨ÙˆÙŠØ±Ø©", "ØªÙ…Ù†Ø±Ø§Ø³Øª", "ØªØ¨Ø³Ø©", "ØªÙ„Ù…Ø³Ø§Ù†", "ØªÙŠØ§Ø±Øª", 
            "ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ", "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", "Ø§Ù„Ø¬Ù„ÙØ©", "Ø¬ÙŠØ¬Ù„", "Ø³Ø·ÙŠÙ", "Ø³Ø¹ÙŠØ¯Ø©", "Ø³ÙƒÙŠÙƒØ¯Ø©", 
            "Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³", "Ø¹Ù†Ø§Ø¨Ø©", "Ù‚Ø§Ù„Ù…Ø©", "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", "Ø§Ù„Ù…Ø¯ÙŠØ©", "Ù…Ø³ØªØºØ§Ù†Ù…", 
            "Ø§Ù„Ù…Ø³ÙŠÙ„Ø©", "Ù…Ø¹Ø³ÙƒØ±", "ÙˆØ±Ù‚Ù„Ø©", "ÙˆÙ‡Ø±Ø§Ù†", "Ø§Ù„Ø¨ÙŠØ¶", "Ø¥Ù„ÙŠØ²ÙŠ", "Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬", 
            "Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³", "Ø§Ù„Ø·Ø§Ø±Ù", "ØªÙ†Ø¯ÙˆÙ", "ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª", "Ø§Ù„ÙˆØ§Ø¯ÙŠ", "Ø®Ù†Ø´Ù„Ø©", "Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³", 
            "ØªÙŠØ¨Ø§Ø²Ø©", "Ù…ÙŠÙ„Ø©", "Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰", "Ø§Ù„Ù†Ø¹Ø§Ù…Ø©", "Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª", "ØºØ±Ø¯Ø§ÙŠØ©", "ØºÙ„ÙŠØ²Ø§Ù†"
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            initWilayas();
            checkProductPage();
            loadTheme();
            updateRecentPanel();
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Firebase
        function loadProducts() {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="loader">
                    <div class="spinner"></div>
                </div>
            `;

            db.collection("products").get().then((snapshot) => {
                allProducts = [];
                snapshot.forEach(doc => {
                    const data = doc.data();
                    allProducts.push({ 
                        id: doc.id, 
                        ...data,
                        images: data.images || (data.imageUrl ? [data.imageUrl] : [])
                    });
                });
                checkProductPage();
            }).catch(error => {
                console.error("Ø®Ø·Ø£:", error);
                loadSampleProducts();
            });
        }

        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function loadSampleProducts() {
            allProducts = [
                { 
                    id: '1', 
                    name: 'ØªÙŠØ´ÙŠØ±Øª Ù‚Ø·Ù†ÙŠ', 
                    price: '2500', 
                    category: 'Ù…Ù„Ø§Ø¨Ø³', 
                    description: 'ØªÙŠØ´ÙŠØ±Øª Ù‚Ø·Ù†ÙŠ 100%ØŒ Ù…Ø±ÙŠØ­ ÙˆÙ…Ù†Ø§Ø³Ø¨ Ù„Ù„ØµÙŠÙ',
                    images: ['https://via.placeholder.com/400?text=ØªÙŠØ´ÙŠØ±Øª']
                },
                { 
                    id: '2', 
                    name: 'Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ', 
                    price: '8500', 
                    category: 'Ø£Ø­Ø°ÙŠØ©', 
                    description: 'Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ Ù…Ø±ÙŠØ­ Ù„Ù„Ø¬Ø±ÙŠ ÙˆØ§Ù„Ù…Ø´ÙŠ',
                    images: ['https://via.placeholder.com/400?text=Ø­Ø°Ø§Ø¡']
                },
                { 
                    id: '3', 
                    name: 'Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©', 
                    price: '15000', 
                    category: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', 
                    description: 'Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© ØªÙ‚ÙŠØ³ Ø¶Ø±Ø¨Ø§Øª Ø§Ù„Ù‚Ù„Ø¨ ÙˆØ§Ù„Ø®Ø·ÙˆØ§Øª',
                    images: ['https://via.placeholder.com/400?text=Ø³Ø§Ø¹Ø©']
                }
            ];
            checkProductPage();
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        function checkProductPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            
            if (productId) {
                const product = allProducts.find(p => p.id === productId);
                if (product) {
                    showProductPage(product);
                } else {
                    showHomePage();
                }
            } else {
                showHomePage();
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function showHomePage() {
            const main = document.getElementById('mainContent');
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±ÙŠØ¯Ø©
            const categories = [...new Set(allProducts.map(p => p.category))];
            
            // Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            const icons = {
                'Ù…Ù„Ø§Ø¨Ø³': 'fa-tshirt',
                'Ø£Ø­Ø°ÙŠØ©': 'fa-shoe-prints',
                'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª': 'fa-mobile-alt',
                'Ø­Ù‚Ø§Ø¦Ø¨': 'fa-bag-shopping',
                'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª': 'fa-clock',
                'ØªØ¬Ù…ÙŠÙ„': 'fa-spa'
            };

            // Ø¨Ù†Ø§Ø¡ HTML Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            main.innerHTML = `
                <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
                <section class="hero-section">
                    <div class="container text-center">
                        <h1 class="display-3 fw-bold mb-4">ğŸ›ï¸ ØªØ³ÙˆÙ‚ Ø¨Ø£Ù…Ø§Ù† ÙˆØ«Ù‚Ø©</h1>
                        <p class="lead mb-5 fs-3">Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ø¹ Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹Ø© ÙˆØ¢Ù…Ù†Ø©</p>
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="display-3 fw-bold" id="productsCount">${allProducts.length}</div>
                                    <div class="fs-4">Ù…Ù†ØªØ¬</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="display-3 fw-bold">5000+</div>
                                    <div class="fs-4">Ø¹Ù…ÙŠÙ„</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="display-3 fw-bold">4.9</div>
                                    <div class="fs-4">ØªÙ‚ÙŠÙŠÙ…</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
                <section class="container my-5" id="categories">
                    <h2 class="text-center mb-4 display-5 fw-bold">ØªØµÙØ­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</h2>
                    <p class="text-center text-muted mb-5 fs-5">Ø§Ø®ØªØ± Ù…Ù† Ø¨ÙŠÙ† Ù…Ø¦Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
                    <div class="row g-4" id="categoriesContainer">
                        ${categories.map((cat, index) => `
                            <div class="col-6 col-md-4 col-lg-2">
                                <div class="category-card" onclick="filterByCategory('${cat}')">
                                    <i class="fas ${icons[cat] || 'fa-tag'} category-icon"></i>
                                    <h6 class="fs-5">${cat}</h6>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>

                <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                <section class="container my-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0 display-5 fw-bold" id="productsTitle">ğŸ”¥ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
                        <button class="btn btn-outline-primary rounded-pill px-4" onclick="showAllProducts()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                    </div>
                    <div class="row g-4" id="productsContainer">
                        ${allProducts.map(product => createProductCard(product)).join('')}
                    </div>
                </section>
            `;
        }

        // Ø¹Ø±Ø¶ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬
        function showProductPage(product) {
            addToRecent(product.id);
            
            const mainImage = product.images && product.images[0] ? product.images[0] : 'https://via.placeholder.com/600';
            const inWishlist = wishlist.includes(product.id) ? 'active' : '';
            
            // ØµÙˆØ± Ù…ØµØºØ±Ø©
            const thumbnails = product.images && product.images.length > 0 
                ? product.images.map((img, i) => `
                    <div class="thumbnail ${i === 0 ? 'active' : ''}" onclick="changeMainImage(this, '${img}')">
                        <img src="${img}" alt="ØµÙˆØ±Ø© ${i+1}">
                    </div>
                `).join('')
                : `<div class="thumbnail active">
                        <img src="${mainImage}" alt="ØµÙˆØ±Ø©">
                   </div>`;

            // Ù…Ù†ØªØ¬Ø§Øª Ø°Ø§Øª ØµÙ„Ø©
            const related = allProducts
                .filter(p => p.id !== product.id && p.category === product.category)
                .slice(0, 4);

            document.getElementById('mainContent').innerHTML = `
                <div class="product-page">
                    <div class="product-details">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="main-image" id="mainImage">
                                    <img src="${mainImage}" alt="${product.name}">
                                </div>
                                <div class="thumbnail-list">
                                    ${thumbnails}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h1 class="product-title">${product.name}</h1>
                                <div class="product-price-large">${product.price}</div>
                                <div class="product-description">
                                    ${product.description || 'ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ±'}
                                </div>
                                <div>
                                    <button class="btn-order-large" onclick="openOrderModal('${product.id}')">
                                        <i class="fas fa-shopping-bag"></i> Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†
                                    </button>
                                    <button class="btn-wishlist ${inWishlist}" onclick="toggleWishlist('${product.id}')">
                                        <i class="fas fa-heart"></i> Ø§Ù„Ù…ÙØ¶Ù„Ø©
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    ${related.length > 0 ? `
                        <div class="mt-5">
                            <h2 class="display-6 fw-bold mb-4">ğŸ”„ Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¯ ØªØ¹Ø¬Ø¨Ùƒ</h2>
                            <div class="row g-4">
                                ${related.map(p => `
                                    <div class="col-md-3">
                                        ${createProductCard(p)}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†ØªØ¬
        function createProductCard(product) {
            const image = product.images && product.images[0] ? product.images[0] : 'https://via.placeholder.com/300';
            
            return `
                <div class="col-md-3">
                    <div class="product-card" onclick="window.location.href='?id=${product.id}'">
                        <div class="product-image">
                            <img src="${image}" alt="${product.name}">
                        </div>
                        <div class="p-3">
                            <span class="badge bg-secondary mb-2">${product.category || 'Ø¹Ø§Ù…'}</span>
                            <h5>${product.name}</h5>
                            <p class="product-price">${product.price} Ø¯.Ø¬</p>
                            <button class="btn-order" onclick="event.stopPropagation(); openOrderModal('${product.id}')">
                                <i class="fas fa-shopping-bag"></i> Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function changeMainImage(element, src) {
            document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
            element.classList.add('active');
            document.getElementById('mainImage').innerHTML = `<img src="${src}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">`;
        }

        // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
        function filterByCategory(category) {
            const filtered = allProducts.filter(p => p.category === category);
            const container = document.getElementById('productsContainer');
            const title = document.getElementById('productsTitle');
            
            title.textContent = `ğŸ“ ${category}`;
            container.innerHTML = filtered.map(p => createProductCard(p)).join('');
            
            document.getElementById('categories').scrollIntoView({ behavior: 'smooth' });
        }

        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function showAllProducts() {
            window.location.href = 'index.html';
        }

        // Ø§Ù„Ø¨Ø­Ø«
        function searchProducts() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            if (!term) {
                window.location.href = 'index.html';
                return;
            }
            
            const filtered = allProducts.filter(p => 
                p.name.toLowerCase().includes(term) || 
                (p.category && p.category.toLowerCase().includes(term))
            );
            
            const main = document.getElementById('mainContent');
            main.innerHTML = `
                <div class="container my-5">
                    <h2 class="mb-4">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: "${term}"</h2>
                    <div class="row g-4">
                        ${filtered.length > 0 ? 
                            filtered.map(p => createProductCard(p)).join('') : 
                            '<p class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</p>'}
                    </div>
                </div>
            `;
        }

        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
        function scrollToCategories() {
            document.getElementById('categories').scrollIntoView({ behavior: 'smooth' });
        }

        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§
        function contactUs() {
            Swal.fire({
                title: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§',
                html: `
                    <div class="text-center">
                        <p><i class="fas fa-phone text-primary"></i> 0555 12 34 56</p>
                        <p><i class="fas fa-envelope text-primary"></i> contact@seleknyyy.dz</p>
                    </div>
                `,
                icon: 'info',
                confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹'
            });
        }

        // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª
        function initWilayas() {
            const select = document.getElementById('orderWilaya');
            if (select) {
                select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>' + 
                    wilayas.map(w => `<option value="${w}">${w}</option>`).join('');
            }
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨
        function openOrderModal(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;

            document.getElementById('orderProductId').value = productId;
            document.getElementById('orderProductName').value = product.name;
            document.getElementById('orderProductPrice').value = product.price;
            document.getElementById('orderProductImage').value = product.images?.[0] || '';

            document.getElementById('orderPreview').innerHTML = `
                <div class="preview-img">
                    <img src="${product.images?.[0] || 'https://via.placeholder.com/80'}">
                </div>
                <div>
                    <h6>${product.name}</h6>
                    <p style="color: #2563eb;">${product.price} Ø¯.Ø¬</p>
                </div>
            `;

            document.getElementById('orderModal').classList.add('active');
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨
        function closeOrderModal() {
            document.getElementById('orderModal').classList.remove('active');
            document.getElementById('orderForm').reset();
        }

        // ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨
        function submitOrder() {
            const order = {
                productId: document.getElementById('orderProductId').value,
                productName: document.getElementById('orderProductName').value,
                productPrice: document.getElementById('orderProductPrice').value,
                productImage: document.getElementById('orderProductImage').value,
                customerName: document.getElementById('orderName').value,
                customerPhone: document.getElementById('orderPhone').value,
                customerWilaya: document.getElementById('orderWilaya').value,
                customerAddress: document.getElementById('orderAddress').value,
                notes: document.getElementById('orderNotes').value,
                status: 'Ø¬Ø¯ÙŠØ¯',
                orderDate: new Date().toISOString(),
                orderNumber: 'ORD-' + Date.now().toString().slice(-6)
            };

            if (!order.customerName || !order.customerPhone || !order.customerWilaya || !order.customerAddress) {
                Swal.fire('Ø®Ø·Ø£', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }

            db.collection("orders").add(order).then(() => {
                Swal.fire({
                    icon: 'success',
                    title: 'âœ… ØªÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­',
                    html: `
                        <p>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: <strong>${order.orderNumber}</strong></p>
                        <p>Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                    `,
                    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹'
                });
                closeOrderModal();
            }).catch(error => {
                let localOrders = JSON.parse(localStorage.getItem('orders')) || [];
                localOrders.push(order);
                localStorage.setItem('orders', JSON.stringify(localOrders));
                
                Swal.fire({
                    icon: 'success',
                    title: 'âœ… ØªÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­',
                    text: 'Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹',
                    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹'
                });
                closeOrderModal();
            });
        }

        // Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function toggleWishlist(productId) {
            const index = wishlist.indexOf(productId);
            if (index === -1) {
                wishlist.push(productId);
                Swal.fire('â¤ï¸', 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'success');
            } else {
                wishlist.splice(index, 1);
                Swal.fire('ğŸ’”', 'ØªÙ…Øª Ø§Ù„Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
            }
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            
            const btn = document.querySelector('.btn-wishlist');
            if (btn) btn.classList.toggle('active');
        }

        function showWishlist() {
            const wishlistProducts = allProducts.filter(p => wishlist.includes(p.id));
            
            if (wishlistProducts.length === 0) {
                Swal.fire('Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
                return;
            }

            let items = wishlistProducts.map(p => `
                <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem; padding: 0.5rem; border-bottom: 1px solid #e2e8f0;">
                    <img src="${p.images?.[0] || 'https://via.placeholder.com/50'}" style="width: 50px; height: 50px; border-radius: 10px; object-fit: cover;">
                    <div>
                        <div>${p.name}</div>
                        <small>${p.price} Ø¯.Ø¬</small>
                    </div>
                </div>
            `).join('');

            Swal.fire({
                title: 'â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©',
                html: items,
                confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹'
            });
        }

        // Ø´ÙˆÙ‡Ø¯ Ù…Ø¤Ø®Ø±Ø§Ù‹
        function addToRecent(productId) {
            recentProducts = [productId, ...recentProducts.filter(id => id !== productId)].slice(0, 5);
            localStorage.setItem('recentProducts', JSON.stringify(recentProducts));
            updateRecentPanel();
        }

        function updateRecentPanel() {
            const recent = allProducts.filter(p => recentProducts.includes(p.id));
            const container = document.getElementById('recentList');
            
            if (!container) return;

            if (recent.length === 0) {
                container.innerHTML = '<p class="text-center text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>';
            } else {
                container.innerHTML = recent.map(p => `
                    <div class="recent-item" onclick="window.location.href='?id=${p.id}'">
                        <img src="${p.images?.[0] || 'https://via.placeholder.com/50'}">
                        <div>
                            <div>${p.name}</div>
                            <small>${p.price} Ø¯.Ø¬</small>
                        </div>
                    </div>
                `).join('');
            }
        }

        function toggleRecent() {
            document.getElementById('recentSidebar').classList.toggle('show');
        }

        // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('themeIcon');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            }
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('themeIcon').className = 'fas fa-sun';
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>