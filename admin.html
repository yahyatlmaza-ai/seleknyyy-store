<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seleknyyy Dashboard | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    
    <!-- Bootstrap RTL -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts - Tajawal -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    
    <style>
        /* ========== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ========== */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #60a5fa;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f97316;
            --info: #3b82f6;
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: #64748b;
            --gradient-primary: linear-gradient(135deg, #2563eb, #7c3aed);
            --gradient-success: linear-gradient(135deg, #10b981, #059669);
            --gradient-danger: linear-gradient(135deg, #ef4444, #dc2626);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: #f1f5f9;
            color: var(--dark);
            margin: 0;
            padding: 0;
        }

        /* ========== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ========== */
        .sidebar {
            width: 280px;
            background: white;
            box-shadow: 2px 0 20px rgba(0,0,0,0.05);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            right: 0;
            top: 0;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            text-align: center;
        }

        .sidebar-logo {
            font-size: 2rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .sidebar-user {
            padding: 1.5rem;
            background: #f8fafc;
            margin: 1rem;
            border-radius: 12px;
            text-align: center;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .sidebar-nav {
            padding: 1rem;
        }

        .nav-item {
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.8rem 1rem;
            color: var(--dark);
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link i {
            width: 24px;
            margin-left: 10px;
        }

        .nav-link:hover {
            background: #f1f5f9;
            color: var(--primary);
        }

        .nav-link.active {
            background: var(--gradient-primary);
            color: white;
        }

        .nav-badge {
            margin-right: auto;
            background: var(--danger);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
        }

        /* ========== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ========== */
        .main-content {
            margin-right: 280px;
            padding: 2rem;
            min-height: 100vh;
        }

        /* ========== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ========== */
        .top-bar {
            background: white;
            padding: 1rem 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        /* ========== Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ========== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: #eff6ff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.2rem;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* ========== Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ========== */
        .content-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin: 0;
        }

        /* ========== Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ========== */
        .table-responsive {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: #f8fafc;
            padding: 1rem;
            font-weight: 600;
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .badge {
            padding: 0.4rem 1rem;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-warning {
            background: #fed7aa;
            color: #92400e;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        /* ========== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ========== */
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            color: white;
            padding: 0.6rem 1.5rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .btn-success {
            background: var(--gradient-success);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
        }

        .btn-danger {
            background: var(--gradient-danger);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
        }

        /* ========== Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ========== */
        .form-control, .form-select {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            outline: none;
        }

        .image-preview {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #e2e8f0;
            margin-top: 0.5rem;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ========== Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ========== */
        .shipping-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .shipping-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .shipping-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .shipping-card.active {
            border-color: var(--primary);
            background: #eff6ff;
        }

        .shipping-logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* ========== Ø§Ù„ØªØ­Ù…ÙŠÙ„ ========== */
        .loader {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f1f5f9;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== Ø§Ù„ØªØ¬Ø§ÙˆØ¨ ========== */
        @media (max-width: 992px) {
            .sidebar {
                right: -280px;
                transition: 0.3s;
            }
            .sidebar.show {
                right: 0;
            }
            .main-content {
                margin-right: 0;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .shipping-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="sidebar-logo">Seleknyyy</a>
        </div>
        
        <div class="sidebar-user">
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div style="font-weight: 700;">Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ØªØ¬Ø±</div>
            <div style="color: var(--gray); font-size: 0.85rem;">Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…</div>
        </div>
        
        <nav class="sidebar-nav">
            <div class="nav-item">
                <div class="nav-link active" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </div>
            </div>
            <div class="nav-item">
                <div class="nav-link" onclick="showSection('products')">
                    <i class="fas fa-box"></i>
                    <span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span>
                    <span class="nav-badge" id="productsBadge">0</span>
                </div>
            </div>
            <div class="nav-item">
                <div class="nav-link" onclick="showSection('orders')">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                    <span class="nav-badge" id="ordersBadge">0</span>
                </div>
            </div>
            <div class="nav-item">
                <div class="nav-link" onclick="showSection('shipping')">
                    <i class="fas fa-truck"></i>
                    <span>Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</span>
                </div>
            </div>
            <div class="nav-item">
                <div class="nav-link" onclick="showSection('customers')">
                    <i class="fas fa-users"></i>
                    <span>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
                    <span class="nav-badge">5000+</span>
                </div>
            </div>
            <hr>
            <div class="nav-item">
                <div class="nav-link text-danger" onclick="previewMode()">
                    <i class="fas fa-eye"></i>
                    <span>ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</span>
                </div>
            </div>
        </nav>
    </aside>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main class="main-content">
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <div class="top-bar">
            <h1 class="page-title" id="currentPageTitle">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h1>
            <div>
                <button class="btn-primary" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="dashboardSection">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="stat-value" id="totalProducts">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-value" id="newOrders">0</div>
                    <div class="stat-label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value">5000+</div>
                    <div class="stat-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-value">4.9</div>
                    <div class="stat-label">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø±</div>
                </div>
            </div>

            <!-- Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
            <div class="content-section">
                <div class="section-header">
                    <h5 class="section-title">Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h5>
                    <button class="btn-primary" onclick="showSection('orders')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            </tr>
                        </thead>
                        <tbody id="recentOrders">
                            <tr>
                                <td colspan="5" class="text-center">
                                    <div class="loader" style="margin: 20px auto;"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
        <div id="productsSection" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h5 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h5>
                    <button class="btn-primary" onclick="showProductForm()">
                        <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
                    </button>
                </div>

                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ -->
                <div id="productFormCard" style="display: none; margin-bottom: 2rem;">
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 12px;">
                        <h6 style="margin-bottom: 1rem;" id="productFormTitle">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h6>
                        <input type="hidden" id="productId">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                                <input type="text" class="form-control" id="productName">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Ø§Ù„Ø³Ø¹Ø± (Ø¯.Ø¬)</label>
                                <input type="number" class="form-control" id="productPrice">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Ø§Ù„Ù‚Ø³Ù…</label>
                                <select class="form-select" id="productCategory">
                                    <option value="Ù…Ù„Ø§Ø¨Ø³">Ù…Ù„Ø§Ø¨Ø³</option>
                                    <option value="Ø£Ø­Ø°ÙŠØ©">Ø£Ø­Ø°ÙŠØ©</option>
                                    <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                                    <option value="Ø­Ù‚Ø§Ø¦Ø¨">Ø­Ù‚Ø§Ø¦Ø¨</option>
                                    <option value="Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</option>
                                    <option value="ØªØ¬Ù…ÙŠÙ„">ØªØ¬Ù…ÙŠÙ„</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</label>
                            <input type="file" class="form-control" id="productImage" accept="image/*">
                            <div class="image-preview" id="imagePreview"></div>
                        </div>
                        
                        <button class="btn-primary" onclick="saveProduct()">Ø­ÙØ¸</button>
                        <button class="btn-danger" onclick="hideProductForm()">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>

                <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Ø§Ù„ØµÙˆØ±Ø©</th>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                <th>Ø§Ù„Ù‚Ø³Ù…</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                            <tr>
                                <td colspan="5" class="text-center">
                                    <div class="loader" style="margin: 20px auto;"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div id="ordersSection" style="display: none;">
            <div class="content-section">
                <h5 class="section-title">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h5>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTable">
                            <tr>
                                <td colspan="7" class="text-center">
                                    <div class="loader" style="margin: 20px auto;"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ -->
        <div id="shippingSection" style="display: none;">
            <div class="content-section">
                <h5 class="section-title">ğŸ‡©ğŸ‡¿ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</h5>
                <div class="shipping-grid" id="algerianShipping"></div>

                <h5 class="section-title mt-4">ğŸŒ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©</h5>
                <div class="shipping-grid" id="internationalShipping"></div>

                <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø­Ù† -->
                <div id="shippingFormCard" style="display: none; margin-top: 2rem;">
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 12px;">
                        <h6 id="shippingFormTitle">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø´Ø±ÙƒØ© Ø§Ù„ØªÙˆØµÙŠÙ„</h6>
                        <input type="hidden" id="shippingId">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Ù…ÙØªØ§Ø­ API</label>
                                <input type="text" class="form-control" id="shippingApiKey">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</label>
                                <input type="text" class="form-control" id="shippingAccount">
                            </div>
                        </div>
                        
                        <button class="btn-primary" onclick="saveShippingSettings()">Ø­ÙØ¸</button>
                        <button class="btn-danger" onclick="hideShippingForm()">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
        <div id="customersSection" style="display: none;">
            <div class="content-section">
                <h5 class="section-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h5>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                                <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
                                <th>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</td>
                                <td>0555123456</td>
                                <td>ahmed@email.com</td>
                                <td>12</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ</td>
                                <td>0555987654</td>
                                <td>sara@email.com</td>
                                <td>8</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
        // âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCjOIN_PDKqTqyd5KLIHtOt9Mofjtu-zas",
            authDomain: "seleknyyy-store.firebaseapp.com",
            projectId: "seleknyyy-store",
            storageBucket: "seleknyyy-store.firebasestorage.app",
            messagingSenderId: "532685887859",
            appId: "1:532685887859:web:8b4fd6141504c91f808d06"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
        const shippingCompanies = {
            algerian: [
                { id: 'yalidine', name: 'Yalidine', icon: 'fa-truck', desc: 'ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª' },
                { id: 'maystro', name: 'Maystro', icon: 'fa-shipping-fast', desc: 'Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠØ©' },
                { id: 'zedex', name: 'ZEDEX', icon: 'fa-box-open', desc: 'ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ø±ÙˆØ¯' },
                { id: 'algerie-poste', name: 'AlgÃ©rie Poste', icon: 'fa-envelope', desc: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ' },
                { id: 'ems', name: 'EMS', icon: 'fa-globe', desc: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹' },
                { id: 'dhl-algerie', name: 'DHL AlgÃ©rie', icon: 'fa-plane', desc: 'ØªÙˆØµÙŠÙ„ Ø¯ÙˆÙ„ÙŠ' }
            ],
            international: [
                { id: 'dhl', name: 'DHL', icon: 'fa-plane', desc: 'ØªÙˆØµÙŠÙ„ Ø¯ÙˆÙ„ÙŠ Ø³Ø±ÙŠØ¹' },
                { id: 'fedex', name: 'FedEx', icon: 'fa-shipping-fast', desc: 'Ø®Ø¯Ù…Ø© Ø¹Ø§Ù„Ù…ÙŠØ©' },
                { id: 'ups', name: 'UPS', icon: 'fa-truck', desc: 'ØªÙˆØµÙŠÙ„ Ù…ÙˆØ«ÙˆÙ‚' },
                { id: 'aramex', name: 'Aramex', icon: 'fa-box', desc: 'ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹' }
            ]
        };

        // ========== Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ==========
        function showSection(section) {
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('ordersSection').style.display = 'none';
            document.getElementById('shippingSection').style.display = 'none';
            document.getElementById('customersSection').style.display = 'none';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(section + 'Section').style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            const titles = {
                dashboard: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                products: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                orders: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
                shipping: 'Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„',
                customers: 'Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡'
            };
            document.getElementById('currentPageTitle').textContent = titles[section];
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø´Ø·
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
            if (section === 'shipping') {
                loadShippingCompanies();
            }
        }

        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
        function loadProducts() {
            const tbody = document.getElementById('productsTable');
            
            db.collection("products").get().then((snapshot) => {
                if (snapshot.empty) {
                    tbody.innerHTML = '<tr><td colspan="5" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</td></tr>';
                    document.getElementById('totalProducts').textContent = '0';
                    document.getElementById('productsBadge').textContent = '0';
                    return;
                }

                let html = '';
                snapshot.forEach((doc) => {
                    const p = doc.data();
                    html += `
                        <tr>
                            <td>
                                <img src="${p.imageUrl || 'https://via.placeholder.com/50'}" 
                                     style="width: 50px; height: 50px; border-radius: 8px; object-fit: cover;">
                            </td>
                            <td>${p.name}</td>
                            <td>${p.price} Ø¯.Ø¬</td>
                            <td>${p.category}</td>
                            <td>
                                <button class="btn-success btn-sm" onclick="editProduct('${doc.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-danger btn-sm" onclick="deleteProduct('${doc.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                tbody.innerHTML = html;
                document.getElementById('totalProducts').textContent = snapshot.size;
                document.getElementById('productsBadge').textContent = snapshot.size;
            }).catch(error => {
                console.error("Ø®Ø·Ø£:", error);
                tbody.innerHTML = '<tr><td colspan="5" class="text-center text-danger">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</td></tr>';
            });
        }

        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ==========
        function loadOrders() {
            const ordersTable = document.getElementById('ordersTable');
            const recentOrders = document.getElementById('recentOrders');
            
            db.collection("orders").orderBy("orderDate", "desc").get().then((snapshot) => {
                let newCount = 0;
                let allHtml = '';
                let recentHtml = '';

                snapshot.forEach((doc, index) => {
                    const o = doc.data();
                    if (o.status === 'Ø¬Ø¯ÙŠØ¯') newCount++;
                    
                    const date = new Date(o.orderDate).toLocaleDateString('ar-DZ');
                    
                    // Ù„Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
                    allHtml += `
                        <tr>
                            <td>${o.orderNumber || 'ORD-' + doc.id.slice(0,4)}</td>
                            <td>${o.customerName}</td>
                            <td>${o.productName}</td>
                            <td>${o.productPrice} Ø¯.Ø¬</td>
                            <td>
                                <span class="badge ${o.status === 'Ø¬Ø¯ÙŠØ¯' ? 'badge-warning' : 'badge-success'}">
                                    ${o.status}
                                </span>
                            </td>
                            <td>${date}</td>
                            <td>
                                <button class="btn-success btn-sm" onclick="updateOrderStatus('${doc.id}', 'Ù…ÙƒØªÙ…Ù„')">
                                    <i class="fas fa-check"></i>
                                </button>
                            </td>
                        </tr>
                    `;

                    // Ø¢Ø®Ø± 5 Ø·Ù„Ø¨Ø§Øª
                    if (index < 5) {
                        recentHtml += `
                            <tr>
                                <td>${o.orderNumber || 'ORD-' + doc.id.slice(0,4)}</td>
                                <td>${o.customerName}</td>
                                <td>${o.productName}</td>
                                <td>${o.productPrice} Ø¯.Ø¬</td>
                                <td>
                                    <span class="badge ${o.status === 'Ø¬Ø¯ÙŠØ¯' ? 'badge-warning' : 'badge-success'}">
                                        ${o.status}
                                    </span>
                                </td>
                            </tr>
                        `;
                    }
                });

                ordersTable.innerHTML = allHtml || '<tr><td colspan="7" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</td></tr>';
                recentOrders.innerHTML = recentHtml || '<tr><td colspan="5" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</td></tr>';
                
                document.getElementById('newOrders').textContent = newCount;
                document.getElementById('ordersBadge').textContent = newCount;
            }).catch(error => {
                console.error("Ø®Ø·Ø£:", error);
            });
        }

        // ========== ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ ==========
        function updateOrderStatus(id, status) {
            db.collection("orders").doc(id).update({ status }).then(() => {
                Swal.fire('ØªÙ…', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©', 'success');
                loadOrders();
            });
        }

        // ========== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==========
        function showProductForm() {
            document.getElementById('productFormTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯';
            document.getElementById('productId').value = '';
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productCategory').value = 'Ù…Ù„Ø§Ø¨Ø³';
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('productFormCard').style.display = 'block';
        }

        function hideProductForm() {
            document.getElementById('productFormCard').style.display = 'none';
        }

        function saveProduct() {
            const id = document.getElementById('productId').value;
            const name = document.getElementById('productName').value;
            const price = document.getElementById('productPrice').value;
            const category = document.getElementById('productCategory').value;
            const imageFile = document.getElementById('productImage').files[0];

            if (!name || !price) {
                Swal.fire('Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }

            const productData = { name, price, category };

            if (imageFile) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    productData.imageUrl = e.target.result;
                    saveToFirestore(productData, id);
                };
                reader.readAsDataURL(imageFile);
            } else {
                saveToFirestore(productData, id);
            }
        }

        function saveToFirestore(productData, id) {
            const promise = id ? 
                db.collection("products").doc(id).update(productData) :
                db.collection("products").add(productData);

            promise.then(() => {
                Swal.fire('ØªÙ…', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬', 'success');
                hideProductForm();
                loadProducts();
            }).catch(error => {
                Swal.fire('Ø®Ø·Ø£', error.message, 'error');
            });
        }

        function editProduct(id) {
            db.collection("products").doc(id).get().then(doc => {
                const p = doc.data();
                document.getElementById('productFormTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬';
                document.getElementById('productId').value = id;
                document.getElementById('productName').value = p.name;
                document.getElementById('productPrice').value = p.price;
                document.getElementById('productCategory').value = p.category;
                if (p.imageUrl) {
                    document.getElementById('imagePreview').innerHTML = `<img src="${p.imageUrl}">`;
                }
                document.getElementById('productFormCard').style.display = 'block';
            });
        }

        function deleteProduct(id) {
            Swal.fire({
                title: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù',
                text: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Ù†Ø¹Ù…',
                cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡'
            }).then(result => {
                if (result.isConfirmed) {
                    db.collection("products").doc(id).delete().then(() => {
                        Swal.fire('ØªÙ…', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'success');
                        loadProducts();
                    });
                }
            });
        }

        // ========== Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ==========
        function loadShippingCompanies() {
            const algerianContainer = document.getElementById('algerianShipping');
            const internationalContainer = document.getElementById('internationalShipping');
            
            // Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©
            algerianContainer.innerHTML = '';
            shippingCompanies.algerian.forEach(company => {
                algerianContainer.innerHTML += `
                    <div class="shipping-card" onclick="showShippingForm('${company.id}', '${company.name}')">
                        <div class="shipping-logo">
                            <i class="fas ${company.icon}"></i>
                        </div>
                        <div style="font-weight: 700;">${company.name}</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">${company.desc}</div>
                    </div>
                `;
            });

            // Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
            internationalContainer.innerHTML = '';
            shippingCompanies.international.forEach(company => {
                internationalContainer.innerHTML += `
                    <div class="shipping-card" onclick="showShippingForm('${company.id}', '${company.name}')">
                        <div class="shipping-logo">
                            <i class="fas ${company.icon}"></i>
                        </div>
                        <div style="font-weight: 700;">${company.name}</div>
                        <div style="font-size: 0.85rem; color: var(--gray);">${company.desc}</div>
                    </div>
                `;
            });
        }

        function showShippingForm(id, name) {
            document.getElementById('shippingFormTitle').textContent = `Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ${name}`;
            document.getElementById('shippingId').value = id;
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            const saved = localStorage.getItem(`shipping_${id}`);
            if (saved) {
                const data = JSON.parse(saved);
                document.getElementById('shippingApiKey').value = data.apiKey || '';
                document.getElementById('shippingAccount').value = data.account || '';
            } else {
                document.getElementById('shippingApiKey').value = '';
                document.getElementById('shippingAccount').value = '';
            }
            
            document.getElementById('shippingFormCard').style.display = 'block';
        }

        function hideShippingForm() {
            document.getElementById('shippingFormCard').style.display = 'none';
        }

        function saveShippingSettings() {
            const id = document.getElementById('shippingId').value;
            const apiKey = document.getElementById('shippingApiKey').value;
            const account = document.getElementById('shippingAccount').value;

            if (!apiKey || !account) {
                Swal.fire('Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }

            localStorage.setItem(`shipping_${id}`, JSON.stringify({ apiKey, account }));
            Swal.fire('ØªÙ…', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
            hideShippingForm();
        }

        // ========== ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('show');
        }

        function previewMode() {
            window.open('index.html', '_blank');
        }

        // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©
        document.getElementById('productImage')?.addEventListener('change', function(e) {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '';
            if (e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    preview.innerHTML = `<img src="${event.target.result}">`;
                };
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.onload = function() {
            loadProducts();
            loadOrders();
        };
    </script>
</body>
</html>